---
title: curl
slug: curl
background: dce0e9
funders: ["Google", "AWS"]
image: /images/curl.svg
blog_posts: ["2020-10-09-memory-safe-curl.md"]
---

<h2>The Story</h2>
<p>
  <a href="https://curl.se/">Curl</a> is a ubiquitous network transfer utility. It's on desktops, laptops, servers, vehicles, and appliances. Securing curl is important because its primary job is to handle data coming in from a network. Unfortunately, all of the networking code in curl is written in C, which is not memory safe.
</p>

<p>
  When we started Prossimo we were particularly interested in learning about how things might go if we try to integrate Rust libraries into a C project with maintainers that are not familiar with writing or reading Rust. If a safer Rust library offers a C interface, then C/C++ consumers shouldn't need to know Rust to use it. The curl project seemed like an interesting opportunity to learn about this.
</p>

<p>
  We got in touch with curl's maintainer, Daniel Stenberg, to talk about how we might help protect curl's core HTTP and TLS networking code from memory safety vulnerabilities. Daniel had a lot of great questions about what we had in mind, and he patiently answered a lot our questions. We quickly realized we were talking to a thoughtful, cautiously progressive maintainer. He was willing to hear us out and consider significant changes, but he would need a plan that was not overly disruptive to existing users.
</p>

<h2>What We've Done</h2>

<p>
  Together with Daniel Stenberg, we came up with a plan to add options to build curl with memory-safe HTTP and TLS libraries. For HTTP we chose the <a href="https://github.com/hyperium/hyper">Hyper</a> library. For TLS we chose the <a href="https://github.com/ctz/rustls">Rustls</a> library.
</p>

<p>
  We contracted with Daniel to integrate the Hyper HTTP library into curl. ISRG engineer Jacob Hoffman-Andrew integrated the Rustls TLS library into curl. They completed the work and we learned a lot along the way.
</p>

<p>
  Today curl users can choose to build curl Rustls for TLS, but the Hyper integration has reached end of life and is no longer available.
</p>

<h2>What's Next</h2>

<p>
  We'll continue to make sure curl users can build with Rustls for memory safe TLS, but beyond that our work on curl is complete.
</p>

<h2>Links</h2>

<ul>
<li><a href="https://daniel.haxx.se/blog/2021/05/28/taking-hyper-curl-further/">Daniel Stenberg: Taking Hyper-curl Further</a></li>
<li><a href="https://daniel.haxx.se/blog/2021/02/04/webinar-curl-hyper-and-rust/">Webinar: curl, Hyper and Rust</a></li>
<li><a href="https://curl.se/">The curl Project</a></li>
<li><a href="https://github.com/curl/curl">curl on GitHub</a></li>
</ul>
